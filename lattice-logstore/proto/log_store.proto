syntax = "proto3";
package lattice.log;

// The Log Store Service - append-only log
service LogStore {
    rpc Append (AppendRequest) returns (AppendResponse);
    rpc Read (ReadRequest) returns (ReadResponse);
}

// --- Service Request/Response ---

message AppendRequest {
    bytes content = 1;
}

message AppendResponse {
    bytes hash = 1;
}

message ReadRequest {
    optional uint64 tail = 1;   // If set, return only the last N entries. If unset, return all.
}

message ReadResponse {
    repeated string entries = 1;
}

// --- Payload Type (log entry format) ---

message LogPayload {
    bytes content = 1;
}

// --- Stream Types (follow subscription) ---

// Parameters for the Follow stream (no params needed)
message FollowParams {}

// Event emitted for each new log entry
message LogEvent {
    bytes content = 1;
}
