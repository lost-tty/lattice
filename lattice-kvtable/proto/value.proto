syntax = "proto3";

package lattice.kvtable;

// On-disk format for KVTable (14D).
//
// `kind` distinguishes live entries from tombstones.
// `heads[0]` is the LWW winner; remaining heads are concurrent losers.
// Non-winning metadata is looked up from the DAG on demand.
message Value {
    oneof kind {
        bytes value = 1;     // Live entry (winner's value, may be empty)
        bool tombstone = 2;  // Delete marker (always true when set)
    }
    repeated bytes heads = 3;  // heads[0] = winner; rest = losers
}
